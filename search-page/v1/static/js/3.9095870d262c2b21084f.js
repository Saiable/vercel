webpackJsonp([3],{BO1k:function(t,r,a){t.exports={default:a("fxRn"),__esModule:!0}},FLVg:function(t,r){},XACv:function(t,r,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=a("BO1k"),e=a.n(o),n=a("Yyay"),i=a("Dv/b"),c={data:function(){return{dirData:[],dirOriginData:[],defaultProps:{children:"children",label:"label"},dirLeftId:0,crxName:"crx获取到的name存这里",crxUrl:"crx获取到url存这里",inputBookmarkIcon:""}},watch:{crxUrl:function(t,r){t!=r&&this.getUrlData(t)}},created:function(){this.initData()},methods:{initData:function(){this.initParentDirData()},handleNodeClick:function(t,r,a){console.log("文件夹节点被点击了",t,r,a),this.dirLeftId=t.id},flatToNested:function(t,r){for(var a=(r=r||{}).idProperty||"id",o=r.parentProperty||"pid",e=r.childrenProperty||"children",n=[],i=[],c=0;c<t.length;c++)i[t[c][a]]=t[c],i[t[c][o]]&&t[c][a]!=t[c][o]?(i[t[c][o]][e]||(i[t[c][o]][e]=[]),i[t[c][o]][e].push(t[c])):n.push(t[c]);return n},initParentDirData:function(){var t=this;Object(n.e)(0).then(function(r){if(console.log("dirOriginData",r),r.data){t.dirOriginData=[];var a=!0,o=!1,n=void 0;try{for(var i,c=e()(r.data);!(a=(i=c.next()).done);a=!0){var s=i.value,l={id:(d=s).id,parentBookmarkId:d.parentBookmarkId,bookmarkName:d.bookmarkName};t.dirOriginData.push(l)}}catch(t){o=!0,n=t}finally{try{!a&&c.return&&c.return()}finally{if(o)throw n}}t.dirOriginData=t.dirOriginData.map(function(t,r){return{label:t.bookmarkName,icon:t.icon,id:t.id,parentBookmarkId:t.parentBookmarkId}}),t.dirData=t.flatToNested(t.dirOriginData,{idProperty:"id",nameProperty:"bookmarkName",parentProperty:"parentBookmarkId",childrenProperty:"children"}),console.log("树形结构",t.dirData)}else t.initAddParentDir();var d})},initAddParentDir:function(){var t=this;Object(n.a)({bookmark_name:"收藏夹栏",parent_bookmark_id:0,is_dir:"1",bookmark_url:"",bookmark_logo:""}).then(function(r){console.log("新增文件夹",r),t.initParentDirData()},function(t){console.log(t)})},renderContent:function(t,r){var a=r.node;r.data,r.stroe;return t("div",{class:"el-tree-outer"},[t("span",{class:"iconfont icon-wenjianjia1"},[" "]),t("span",{class:"el-tree-text"},[" ",a.label," "])])},saveCrxUrl:function(){var t={bookmark_name:this.crxName,parent_bookmark_id:this.dirLeftId,is_dir:"0",bookmark_url:this.crxUrl,bookmark_logo:this.inputBookmarkIcon};this.addBookmarkUrlData(t)},addBookmarkUrlData:function(t){var r=this;Object(n.a)(t).then(function(t){0==t.code&&(console.log("新增url书签",t),r.$message({showClose:!0,message:"添加成功",type:"success"})),1==t.code&&console.log("新增书签失败，错误信息：",t.message)},function(t){console.log(t)})},getUrlData:function(t){var r=this;Object(i.g)(t).then(function(t){console.log("获取url信息",t),t.data.icon?r.inputBookmarkIcon=t.data.icon:r.inputBookmarkIcon=""},function(t){console.log(t)})}}},s={render:function(){var t=this,r=t.$createElement,a=t._self._c||r;return a("div",{staticClass:"drop-down"},[a("span",{staticClass:"iconfont icon-tianjia3"}),t._v(" "),a("div",{staticClass:"drop-down-outer"},[a("div",{staticClass:"drop-down-inner"},[a("div",{staticClass:"title"},[t._v("编辑收藏夹")]),t._v(" "),a("div",{staticClass:"drop-down-input"},[a("span",[t._v("名称")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.crxName,expression:"crxName"}],attrs:{type:"text"},domProps:{value:t.crxName},on:{input:function(r){r.target.composing||(t.crxName=r.target.value)}}})]),t._v(" "),a("div",{staticClass:"drop-down-input"},[a("span",[t._v("URL")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.crxUrl,expression:"crxUrl"}],attrs:{type:"text"},domProps:{value:t.crxUrl},on:{input:function(r){r.target.composing||(t.crxUrl=r.target.value)}}})]),t._v(" "),a("div",{staticClass:"content"},[a("el-tree",{staticClass:"mytree-left",attrs:{data:t.dirData,props:t.defaultProps,"render-content":t.renderContent,"expand-on-click-node":!1,"default-expand-all":!0,draggable:!1},on:{"node-click":t.handleNodeClick}})],1),t._v(" "),a("div",{staticClass:"footer"},[a("button",{staticClass:"confirm",on:{click:t.saveCrxUrl}},[t._v("保存")]),t._v(" "),a("button",{staticClass:"cancel"},[t._v("取消")])])])])])},staticRenderFns:[]};var l=a("VU/8")(c,s,!1,function(t){a("FLVg")},"data-v-22fcf7f7",null);r.default=l.exports},Yyay:function(t,r,a){"use strict";r.d=function(t){return Object(o.a)({url:"/bookmark",params:{query:t}})},r.e=function(){return Object(o.a)({url:"/bookmark/list-dir"})},r.b=function(t){return Object(o.a)({method:"post",url:"/bookmark/delete",data:t})},r.h=function(t){return Object(o.a)({method:"post",url:"/bookmark/modify",data:t})},r.a=function(t){return Object(o.a)({method:"post",url:"/bookmark/add",data:t})},r.g=function(t){return Object(o.a)({url:"/bookmark/search",params:{query:t}})},r.f=function(t){return Object(o.a)({method:"post",url:"/bookmark/import",data:t})},r.c=function(){return Object(o.a)({method:"post",url:"/bookmark/export"})};var o=a("vLgD")},fxRn:function(t,r,a){a("+tPU"),a("zQR9"),t.exports=a("g8Ux")},g8Ux:function(t,r,a){var o=a("77Pl"),e=a("3fs2");t.exports=a("FeBl").getIterator=function(t){var r=e(t);if("function"!=typeof r)throw TypeError(t+" is not iterable!");return o(r.call(t))}}});
//# sourceMappingURL=3.9095870d262c2b21084f.js.map