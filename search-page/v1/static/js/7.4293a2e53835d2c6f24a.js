webpackJsonp([7],{JZ50:function(s,e){},"T+/8":function(s,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=a("MArX"),r=a("Du/2"),o={name:"login",components:{Warning:function(){return a.e(20).then(a.bind(null,"PsYQ"))}},data:function(){return{panel:!1,registerUserInfo:{nickname:"",passport:"",password:"",password2:""},registerResponse:{},localImage:{imageBase:localStorage.getItem("defaultImage")},loginUserInfo:{passport:"",password:""},loginInfo:{token:"",userKey:"",uuid:""},validateRes:{nickname:{res:!1,message:""},passport:{res:!1,message:""},password:{res:!1,message:""},password2:{res:!1,message:""},loginInfoCheck:{res:!1,message:""}},isBlur:{nicknameBlur:!1,passportBlur:!1,passwordBlur:!1,password2Blur:!1,loginInfoCheckBlur:!1}}},watch:{"registerUserInfo.nickname":{deep:!0,handler:function(s){this.isBlur.nicknameBlur&&(s.length>5&&s.length<17?this.validateRes.nickname={res:!0,message:""}:this.validateRes.nickname={res:!1,message:"昵称长度应当在6到16之间"})}},"registerUserInfo.passport":{deep:!0,handler:function(s){this.isBlur.passportBlur&&(console.log(s),s.length>5&&s.length<17?this.validateRes.passport={res:!0,message:""}:this.validateRes.passport={res:!1,message:"账号长度应当在6到16之间"})}},"registerUserInfo.password":{deep:!0,handler:function(s){console.log(s),s.length>5&&s.length<17?this.validateRes.password={res:!0,message:""}:this.validateRes.password={res:!1,message:"密码长度应当在6到16之间"},this.checkPassword()}},"registerUserInfo.password2":{deep:!0,handler:function(s){console.log(s),this.isBlur.password2Blur&&(s==this.registerUserInfo.password?this.validateRes.password2={res:!0,message:""}:this.validateRes.password2={res:!1,message:"两次密码不相等"})}}},computed:{panelActive:function(){return{"right-panel-active":this.panel}}},methods:{goBack:function(){this.$router.push("home")},myChange:function(){this.panel=!this.panel},Register:function(s){var e=this,a=this.validateRes.nickname.res&&this.validateRes.passport.res&&this.validateRes.password.res&&this.validateRes.password2.res;console.log(a),a&&Object(t.m)(s).then(function(s){if(e.registerResponse=s,console.log(s),0==s.code){var a={passport:e.registerUserInfo.passport,password:e.registerUserInfo.password};e.Login(a)}else window.alert("注册失败，失败原因如下:\n "+s.message)},function(s){console.log(s)})},Login:function(s){var e=this;Object(t.k)(s).then(function(s){if(e.loginInfo=s.data,1==s.code&&(e.validateRes.loginInfoCheck={res:!1,message:s.message},e.isBlur.loginInfoCheckBlur=!0),0==s.code){e.$store.commit(r.e,e.loginInfo.token),e.$router.push("home");var a=e.$createElement;e.$notify({title:"登录成功",message:a("b",{style:"color: black"},"欢迎欢迎━(*｀∀´*)ノ亻!"),type:"success",position:"bottom-right"})}})},validateNickname:function(s){var e=s.target.value;e.length>5&&e.length<17?(this.validateRes.nickname={res:!0,message:""},this.isBlur.nicknameBlur=!0):(this.validateRes.nickname={res:!1,message:"账号长度应当在6到16之间"},this.isBlur.nicknameBlur=!0),this.checkNickname(e)},validatePassport:function(s){var e=s.target.value;e.length>5&&e.length<17?(console.log(e),this.validateRes.passport={res:!0,message:""},this.isBlur.passportBlur=!0):(this.validateRes.passport={res:!1,message:"账号长度应当在6到16之间"},this.isBlur.passportBlur=!0),this.checkPassport(e)},validatePassword:function(s){var e=s.target.value;e.length>5&&e.length<17?(console.log(e),this.validateRes.password={res:!0,message:""},this.isBlur.passwordBlur=!0):0==e.length?(this.validateRes.password={res:!1,message:"密码不能为空"},this.isBlur.passwordBlur=!0):(this.validateRes.password={res:!1,message:"密码长度应当在6到16之间"},this.isBlur.passwordBlur=!0)},validatepassword2:function(s){var e=s.target.value;0==e.length?(this.validateRes.password2={res:!1,message:"密码不能为空"},this.isBlur.password2Blur=!0):e==this.registerUserInfo.password?(console.log(e),this.validateRes.password2={res:!0,message:""},this.isBlur.password2Blur=!0):(this.validateRes.password2={res:!1,message:"两次密码不相等"},this.isBlur.password2Blur=!0)},checkNickname:function(s){var e=this;Object(t.a)(s).then(function(s){if(1==s.code&&(e.validateRes.nickname={res:!1,message:"昵称已被占用"}),51==s.code&&(e.validateRes.nickname={res:!1,message:s.message}),0==s.code){var a=s.data.nickname.length;e.validateRes.nickname=a>5&&a<17?{res:!0,message:""}:{res:!1,message:"昵称长度应当在6到16之间"}}},function(s){console.log("error:",s)})},checkPassport:function(s){var e=this;Object(t.b)(s).then(function(s){if(console.log("res:",s),1==s.code&&(e.validateRes.passport={res:!1,message:"账号已被占用"}),51==s.code&&(e.validateRes.passport={res:!1,message:s.message}),0==s.code){console.log(s);var a=s.data.passport.length;e.validateRes.passport=a>5&&a<17?{res:!0,message:""}:{res:!1,message:"账号长度应当在6到16之间"}}},function(s){console.log("error:",s)})},checkPassword:function(){this.registerUserInfo.password!=this.registerUserInfo.password2?this.validateRes.password2={res:!1,message:"两次密码不相等"}:this.validateRes.password2={res:!0,message:""}}}},i={render:function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("div",[a("div",{staticClass:"login-page",style:{backgroundImage:"url("+s.localImage.imageBase+")"}},[a("div",{ref:"container",staticClass:"container",class:s.panelActive},[a("div",{staticClass:"go-back",on:{click:s.goBack}},[a("i",{staticClass:"iconfont icon-fanhui"})]),s._v(" "),a("div",{staticClass:"container-form container--signup"},[a("div",{staticClass:"form",attrs:{id:"form1"}},[a("h2",{staticClass:"form-title"},[s._v("用户注册")]),s._v(" "),a("div",{staticClass:"form-outer"},[a("input",{directives:[{name:"model",rawName:"v-model",value:s.registerUserInfo.nickname,expression:"registerUserInfo.nickname"}],staticClass:"input",attrs:{type:"text",autocomplete:"off",placeholder:"请输入昵称","data-item":"nickname"},domProps:{value:s.registerUserInfo.nickname},on:{blur:function(e){return s.validateNickname(e)},input:function(e){e.target.composing||s.$set(s.registerUserInfo,"nickname",e.target.value)}}}),s._v(" "),a("Warning",{attrs:{validateResProps:s.validateRes.nickname,isBlur:s.isBlur.nicknameBlur}})],1),s._v(" "),a("div",{staticClass:"form-outer"},[a("input",{directives:[{name:"model",rawName:"v-model",value:s.registerUserInfo.passport,expression:"registerUserInfo.passport"}],staticClass:"input",attrs:{type:"text",autocomplete:"off",placeholder:"请输入账户","data-item":"passport"},domProps:{value:s.registerUserInfo.passport},on:{blur:function(e){return s.validatePassport(e)},input:function(e){e.target.composing||s.$set(s.registerUserInfo,"passport",e.target.value)}}}),s._v(" "),a("Warning",{attrs:{validateResProps:s.validateRes.passport,isBlur:s.isBlur.passportBlur}})],1),s._v(" "),a("div",{staticClass:"form-outer"},[a("input",{directives:[{name:"model",rawName:"v-model",value:s.registerUserInfo.password,expression:"registerUserInfo.password"}],staticClass:"input",attrs:{type:"password",autocomplete:"off",placeholder:"请输入密码","data-item":"password"},domProps:{value:s.registerUserInfo.password},on:{blur:function(e){return s.validatePassword(e)},input:function(e){e.target.composing||s.$set(s.registerUserInfo,"password",e.target.value)}}}),s._v(" "),a("Warning",{attrs:{validateResProps:s.validateRes.password,isBlur:s.isBlur.passwordBlur}})],1),s._v(" "),a("div",{staticClass:"form-outer"},[a("input",{directives:[{name:"model",rawName:"v-model",value:s.registerUserInfo.password2,expression:"registerUserInfo.password2"}],staticClass:"input",attrs:{type:"password",autocomplete:"off",placeholder:"请重复输入密码","data-item":"password2"},domProps:{value:s.registerUserInfo.password2},on:{blur:function(e){return s.validatepassword2(e)},input:function(e){e.target.composing||s.$set(s.registerUserInfo,"password2",e.target.value)}}}),s._v(" "),a("Warning",{attrs:{validateResProps:s.validateRes.password2,isBlur:s.isBlur.password2Blur}})],1),s._v(" "),a("button",{staticClass:"btn",on:{click:function(e){return s.Register(s.registerUserInfo)}}},[s._v("\n            注册\n          ")])])]),s._v(" "),a("div",{staticClass:"container-form container--signin"},[a("div",{staticClass:"form",attrs:{id:"form2"}},[a("h2",{staticClass:"form-title"},[s._v("用户登陆")]),s._v(" "),a("div",{staticClass:"form-outer"},[a("input",{directives:[{name:"model",rawName:"v-model",value:s.loginUserInfo.passport,expression:"loginUserInfo.passport"}],staticClass:"input",attrs:{type:"text",autocomplete:"off",placeholder:"请输入账号"},domProps:{value:s.loginUserInfo.passport},on:{input:function(e){e.target.composing||s.$set(s.loginUserInfo,"passport",e.target.value)}}}),s._v(" "),a("Warning",{attrs:{validateResProps:s.validateRes.loginInfoCheck,isBlur:s.isBlur.loginInfoCheckBlur}})],1),s._v(" "),a("div",{staticClass:"form-outer"},[a("input",{directives:[{name:"model",rawName:"v-model",value:s.loginUserInfo.password,expression:"loginUserInfo.password"}],staticClass:"input",attrs:{type:"password",autocomplete:"off",placeholder:"请输入密码"},domProps:{value:s.loginUserInfo.password},on:{input:function(e){e.target.composing||s.$set(s.loginUserInfo,"password",e.target.value)}}}),s._v(" "),a("Warning",{attrs:{validateResProps:s.validateRes.loginInfoCheck,isBlur:s.isBlur.loginInfoCheckBlur}})],1),s._v(" "),a("a",{staticClass:"link",attrs:{href:"#"}},[s._v("忘记密码？")]),s._v(" "),a("button",{staticClass:"btn",on:{click:function(e){return s.Login(s.loginUserInfo)}}},[s._v("登陆")])])]),s._v(" "),a("div",{staticClass:"container-overlay"},[a("div",{staticClass:"overlay",style:{backgroundImage:"url("+s.localImage.imageBase+")"}},[a("div",{staticClass:"overlay-panel overlay--left"},[a("button",{staticClass:"btn",on:{click:s.myChange}},[s._v("已有账号，直接登陆")])]),s._v(" "),a("div",{staticClass:"overlay-panel overlay--right"},[a("button",{staticClass:"btn",on:{click:s.myChange}},[s._v("没有账号，点击注册")])])])])])])])},staticRenderFns:[]};var n=a("VU/8")(o,i,!1,function(s){a("JZ50")},"data-v-0ced0f51",null);e.default=n.exports}});
//# sourceMappingURL=7.4293a2e53835d2c6f24a.js.map